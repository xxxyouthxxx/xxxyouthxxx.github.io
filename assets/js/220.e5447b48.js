(window.webpackJsonp=window.webpackJsonp||[]).push([[220],{676:function(e,t,n){"use strict";n.r(t);var o={name:"Link",props:{type:{type:String,default:""},to:{type:String,default:""},source:{type:String,default:""}},data:()=>({loading:!1,slotContent:""}),created(){const e=this.$slots.default&&this.$slots.default[0];e&&(this.slotContent=(e.text||"").toLowerCase().replace(/\s+/g,"-"))},methods:{async showpage(){if(this.to){this.loading=!0;try{const e=1e5;await(async e=>{const t=e.match(/[^\\\/]*$/)[0];return await fetch("http://faas.lionad.art/getmeta?name="+t).then(e=>e.text()).then(e=>+e)})(this.to)<e?await this.display():this.source?window.open(this.source):alert("资源体积过大，暂时不予展示，敬请谅解")}finally{this.loading=!1}}else window.open(this.source)},async display(){const e=await(async e=>await fetch(e).then(e=>e.text()).then(e=>e.replace(/<!--[^-]*-->/gim,"").replace(/<script[^>]*>/gim," \x3c!-- ").replace(/<\/script[\s]*>/gim," --\x3e ").replace(/<!--[^-]*-->/gim,"").replace(/(<a\s+[^>]*)href=/gim,"$1")))(this.to),t=document.createElement("iframe");t.setAttribute("frameborder","0"),t.setAttribute("class","linkpage fullscreen"),t.setAttribute("srcdoc",e),t.setAttribute("style","width: 100vw; height: 100vh; z-index: 999"),document.body.append(t);const n=document.querySelector(".linkpage"),o=n.shadowRoot||n.document||n,r=({keyCode:e})=>{27===e&&t&&t.remove()};document.addEventListener("keydown",r),o&&o.addEventListener("keydown",r);this.$nextTick(()=>this.disableInnerLink),this.$once("hook:beforeDestroy",()=>{t&&t.remove(),r&&(document.removeEventListener("keydown",r),o&&o.addEventListener("keydown",r))})},disableInnerLink(){try{const e=document.querySelector(".linkpage"),t=e.shadowRoot||e.document||e;(t?[...t.querySelectorAll("a")]:[]).map(e=>e.removeAttribute("href"))}catch(e){throw e}}}},r=n(0),a=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("fragment",[e.type?e._e():[t("a",{attrs:{id:e.slotContent,href:e.to,rel:"noopener noreferrer",target:"_blank"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.showpage.apply(null,arguments)}}},[e._t("default")],2)],e._v(" "),"blockquote"===e.type?[t("blockquote",[t("p",[t("a",{attrs:{id:e.slotContent,href:e.to,rel:"noopener noreferrer",target:"_blank"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.showpage.apply(null,arguments)}}},[e._t("default")],2)])])]:e._e(),e._v(" "),"h5"===e.type?[t("h5",{staticStyle:{display:"content"}},[t("a",{attrs:{id:e.slotContent,href:e.to,rel:"noopener noreferrer",target:"_blank"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.showpage.apply(null,arguments)}}},[e._t("default")],2)])]:e._e()],2)}),[],!1,null,null,null);t.default=a.exports}}]);